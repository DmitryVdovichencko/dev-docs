---
title: "Асинхронность в JS" 
date: "2020-02-24"
tags: ["js"]
---

# Асинхронность в JS.

Конспект по лекциям [Асинхронное программирование](https://www.youtube.com/playlist?list=PLHhi8ymDMrQZ0MpTsmi54OkjTbo0cjU1T)

# Асинхронность в JS. Обзор.

### Когда появляется асинхронность?

* Обращение к вводу/выводу. Например чтение/запись в файл.
* Вызов таймеров
* Получение данных от внешнего `api` или обращение к базе данных.

### Варианты упорядочивания асинхронного кода.

* __Callbacks__

> По завершении получения данных или выполнения асинхронной функции вызывается функция `callback` для их обработки. В асинхронную функцию `callback` передаем в качестве аргумента последним, а `err` передаем первым аргументом в `callback`

```js
(...args, callback) => callback(err, data)
```
Недостатки: 

* Большая вложенность => Callback Hell

```js
readConfig('myConfig', (e,data)=>{
    query('select * from cities', (e,data)=>{
        httpGet('http://google.com', (e,data)=>{
            readFile('README.md', (e,data)=>{
            });
        });
    });
});
```
Можно упростить запись:

```js
readConfig('myConfig',
    query.bind(null,'select * from cities',
        httpGet.bind(null,'http://google.com',
            readFile.bind('README.md', ()=>{
            });
        );
    );
);
```

Вызов `query.bind`  создаёт новую функцию `readConfig`, которая передаёт вызов query, фиксируя `null` как контекст, и `'select * from cities'` – как первый аргумент. Следующие аргументы передаются как есть.

Это называется частичное применение – мы создаём новую функцию, фиксируя некоторые из существующих параметров.

Обратите внимание, что в данном случае мы на самом деле не используем `this`. Но для `bind` это обязательный параметр, так что мы должны передать туда что-нибудь вроде `null`.

* __[async.js](https://caolan.github.io/)__

Основная идея этой библиотеки:

Методу библиотеки передаем массив функций который нужно выполнить. В зависимости от метода можно выполнять, например, параллельное или последовательное выполнение.





